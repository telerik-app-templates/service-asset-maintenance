<div id="service-requests-view"
     data-role="view"
     data-model="global.serviceRequests.viewModel"
     data-init="global.serviceRequests.viewModel.onInit">
    <div data-role="header">
        <ul data-role="buttongroup"
            data-index="0"
            data-bind="index: selectedFilter, events: { select: filterChanged }">
            <li>All</li>
            <li>My requests</li>
        </ul>
    </div>

    <ul data-role="listview"
        data-auto-bind="false"
        data-style="inset"
        data-template="service-request-item-template"
        data-bind="source: serviceRequests, click: serviceRequestClicked"
        data-selectable="single"
        data-filterable="{ field:'title', operator:'startswith' }"></ul>

    <div data-role="footer">
        <a data-role="button"
           data-bind="click: submitServiceRequest"
           data-url="ui/submitServiceRequest/submitServiceRequestView.html"
           data-tablettarget="content-pane"
           data-contentpane="master-pane"
           class="asset-button">Submit Request</a>
    </div>
</div>

<script type="text/x-kendo-template" id="service-request-item-template">
    <span class="listview-item-status">${ global.converters.getServiceRequestStatusText(status) }</span>
    <span class="listview-item-title">${ title }</span>
    <span class="listview-item listview-item-details">${ maintenanceType.Type }</span>
    <span class="listview-item listview-item-details listview-item-duedate">${ global.converters.formatDate(dueDate) }</span>
    <span class="listview-item priority-label" data-bind="css: { priority-low: priority === 0, priority-medium: priority === 1, priority-high: priority === 2 }">${ global.converters.convertPriority(priority) }</span>
</script>