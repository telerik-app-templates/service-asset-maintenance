<div data-role="view"
     data-model="global.serviceRequests.viewModel"
     data-show="global.serviceRequests.viewModel.onShow" >
    <div>
        <ul data-role="buttongroup"
            data-index="0"
            data-bind="index: selectedFilter, events: { select: filterChanged }">
            <li>All</li>
            <li>My requests</li>
        </ul>
    </div>

    <ul data-role="listview"
        data-auto-bind="false"
        data-style="inset"
        data-template="service-request-item-template"
        data-bind="source: serviceRequests, click: serviceRequestClicked"
        data-filterable="{ field:'title', operator:'startswith' }"></ul>

    <div data-role="footer">
        <a data-role="button"
           data-bind="click: navigate"
           data-url="ui/submitServiceRequest/submitServiceRequestView.html"
           data-tablettarget="content-pane">Submit Request</a>
    </div>
</div>

<script type="text/x-kendo-template" id="service-request-item-template">
    <a data-role="listview-link">
        <div>
            <span>${ global.converters.getServiceRequestStatusText(status) }</span>
        </div>
        <div>
            <span>${ title }</span>
        </div>
        <div>
            <span>${ global.converters.formatDate(dueDate) }</span>
            <span>${ priority }</span>
        </div>
    </a>
</script>